<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系統功能整合頁面</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="W513.png" type="image/png">
    <link rel="apple-touch-icon" href="W513.png">
    <meta name="theme-color" content="#121212">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div id="main-container">
        <header>
            <h1>系統功能整合</h1>
            <button id="admin-login-btn" title="管理者登入">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
        </header>

        <div id="bulletin-board">
            <h2>📢 公告欄</h2>
            <div id="bulletin-content">
                <!-- 公告內容將由 JavaScript 動態載入 -->
                <p class="no-bulletin">目前無公告</p>
            </div>
            <div id="admin-controls" class="hidden">
                <textarea id="new-bulletin" placeholder="輸入公告內容..."></textarea>
                <div class="duration-controls" style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px; color: #aaa;">
                    <label>提示窗顯示時間：</label>
                    <input type="number" id="duration-days" min="0" value="1" style="width: 50px; padding: 5px; background: #2c2c2c; border: 1px solid #333; color: white; border-radius: 4px;"> 天
                    <input type="number" id="duration-hours" min="0" value="0" style="width: 50px; padding: 5px; background: #2c2c2c; border: 1px solid #333; color: white; border-radius: 4px;"> 小時
                </div>
                <button id="post-bulletin-btn">發布公告</button>
                <button id="logout-btn" class="secondary-btn">登出</button>
            </div>
        </div>

        <div id="links-grid">
            <div class="link-card" data-url="https://csc-w513.github.io/sbase/" data-name="小港分機查詢">
                <div class="img-container">
                    <img src="小港分機查詢圖檔.webp" alt="小港分機查詢">
                </div>
                <span>小港分機查詢</span>
            </div>
            <div class="link-card" data-url="https://tradinreplay.github.io/exten/" data-name="總部交換機號碼管理">
                <div class="img-container">
                    <img src="總部交換機號碼管理圖檔.svg" alt="總部交換機號碼管理">
                </div>
                <span>總部交換機號碼管理</span>
            </div>
            <div class="link-card" data-url="https://tradinreplay.github.io/Map/" data-name="地圖標註系統">
                <div class="img-container">
                    <img src="地圖標註圖檔.png" alt="地圖標註系統">
                </div>
                <span>地圖標註系統</span>
            </div>
            <div class="link-card" data-url="https://tradinreplay.github.io/assets/" data-name="資產管理系統">
                <div class="img-container">
                    <img src="資產辨識網頁圖檔.png" alt="資產管理系統">
                </div>
                <span>資產管理系統</span>
            </div>
        </div>
    </div>

    <!-- Iframe Container for External Pages -->
    <div id="iframe-container" class="hidden">
        <iframe id="content-frame" src=""></iframe>
        <div id="toast-message" class="hidden">再按一次返回鍵回到主頁面</div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" data-target="login-modal">&times;</span>
            <h2>管理者登入</h2>
            <input type="password" id="admin-password" placeholder="請輸入密碼">
            <button id="submit-login">登入</button>
            <p id="login-error" class="error-msg hidden">密碼錯誤</p>
        </div>
    </div>

    <!-- Edit Bulletin Modal -->
    <div id="edit-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" data-target="edit-modal">&times;</span>
            <h2>修改公告</h2>
            <textarea id="edit-bulletin-content" placeholder="修改公告內容..."></textarea>
            <div class="modal-actions">
                <button id="save-edit-btn">儲存</button>
                <button id="cancel-edit-btn" class="secondary-btn">取消</button>
            </div>
        </div>
    </div>

    <!-- Announcement Popup Modal -->
    <div id="announcement-popup" class="modal hidden">
        <div class="modal-content highlight-modal">
            <span class="close-modal" data-target="announcement-popup">&times;</span>
            <div class="popup-header">
                <div class="popup-icon-wrapper">
                    <span class="popup-icon">📢</span>
                </div>
                <h2 id="popup-title">最新公告</h2>
            </div>
            <div id="popup-content" class="popup-text"></div>
            <div class="modal-actions" style="justify-content: center;">
                <button id="close-popup-btn" class="primary-btn">我知道了</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
